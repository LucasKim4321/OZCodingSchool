
-------------------------------------------------
Day1 FastAPI ì‹œì‘ì„ ìœ„í•œ ê°œë°œ í™˜ê²½ êµ¬ì¶•
-------------------------------------------------


ë‹¤ìŒ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ê°œë°œí•˜ëŠ”ê±¸ ëª©í‘œë¡œ í•œë‹¤.

http://www.meetifyr.com/

meetifyr

ê·¸ë£¹ì˜ ì•½ì† ì¼ì •ì„ ì‰½ê²Œ ì¡ì„ ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” ì›¹ì‚¬ì´íŠ¸

http://www.meetifyr.com/8EiNHBuw6X


--------
Poetry
--------

    ì£¼ì˜ì‚¬í•­

        anaconda ê°€ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ë©´ ì‚­ì œí•˜ê±°ë‚˜, anaconda ë¥¼ ì•„ì˜ˆ ë„ê³  (anaconda ê°€ìƒí™˜ê²½ì´ ì¼œì ¸ ìˆìœ¼ë©´ ì•ˆ ë©ë‹ˆë‹¤.) poetry ì„¤ì¹˜í•©ë‹ˆë‹¤.

        pyenv ë„ ë§ˆì°¬ê°€ì§€ë¡œ, pyenv ë¥¼ ë¹„í™œì„±í™” í˜¹ì€ ì‚­ì œí•˜ê³  poetry ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

        brew ë¡œ poetry ì„¤ì¹˜í•˜ì§€ ì•Šì•˜ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. (official installer ë¡œ ì„¤ì¹˜í•  ë•Œë‘ default ì„¤ì •ê°’ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.)

        pyenvê°€ í™œì„±í™” ë˜ì–´ìˆì„ ì‹œ íŒŒì´ì°¸ì—ì„œ FastAPIì™€ poetryë¥¼ ì‚¬ìš©í•œ í”„ë¡œì íŠ¸ê°€ ì œëŒ€ë¡œ ìƒì„±ë˜ì§€ ì•ŠìŒ.
        vim ~/.zshrcë¡œ zshì„¤ì •ì„ ì—´ì–´ì„œ pyenvê°€ ì ìš©ë˜ì§€ ì•Šê²Œ pyenvê´€ë ¨ ì„¤ì •ì„ ëª¨ë‘ ì£¼ì„ì²˜ë¦¬í•˜ë‹ˆê¹Œ ë¨.

    poetry í™ˆí˜ì´ì§€

        https://python-poetry.org/

        - ë§¤ ë²ˆ pip freeze í•  í•„ìš” ì—†ì´, ì•Œì•„ì„œ poetry.lock ìœ¼ë¡œ ì¢…ì†ì„±ì„ ê´€ë¦¬í•´ ì¤ë‹ˆë‹¤.

        - PEP 518 í‘œì¤€ì¸ pyproject.toml ë¡œ í”„ë¡œì íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì„ ë„ì™€ì¤ë‹ˆë‹¤.

        - PEP: Python Enhancement Proposal â†’ python comunity ê°€ PEP ë¼ëŠ” ë¬¸ì„œë¥¼ ì‚¬ìš©í•´ì„œ, "ì•ìœ¼ë¡œ python ì„ ì–´ë–»ê²Œ ê°œì„ í• ì§€" ë…¼ì˜í•©ë‹ˆë‹¤.

        - https://www.python.org/dev/peps/pep-0518/

        - black, isort, mypy, ruff, coverage, pytest ì„¤ì •ì„ pyproject.toml í•œ ê³³ì— ëª¨ìë‹ˆë‹¤.

        - ëª¨ë“  ì¢…ì†ì„± ì˜ˆ) fastapi ì˜ ë²„ì „ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

        - pip ì™€ ë‹¬ë¦¬ ì¢…ì†ì„±ì„ group ì— ë”°ë¼ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            â–ª ê°œë°œì‹œì—ë§Œ í•„ìš”í•œ ì¢…ì†ì„±: black, pytest
            â–ª ì‹¤ì œ ë°°í¬ì‹œì— í•„ìš”í•œ ì¢…ì†ì„±: fastapi
        -  build.gradle ì´ë‘ ë¹„ìŠ·?

    pip ë³´ë‹¤ ì¢€ ë” ë˜‘ë˜‘í•œ dependency resolving (https://github.com/python-poetry/poetry/poetry#why)


    poetry ì„¤ì¹˜

        python --version ìœ¼ë¡œ ë²„ì „í™•ì¸ (3.13)
        poetry ì„¤ì¹˜ (https://python-poetry.org/docs/)

        ì½”ë“œìŠ¤ë‹ˆí«(Code Snippet) poetry ì„¤ì¹˜ (mac ìš©)
        curl -sSL https://install.python-poetry.org | python3 --version 1.8.5

        ì½”ë“œìŠ¤ë‹ˆí«(Code Snippet) poetry ì„¤ì¹˜ (windows ìš©)
        (Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | py -


--------------
íŒŒì´ì¬ (python)
--------------

íŒŒì´ì¬ ì„¤ì¹˜
ë²„ì „ ì„ íƒ
macOS 64-bit universal2 installer ì„¤ì¹˜
ì„¤ì¹˜ í›„ ë‚˜ì˜¤ëŠ” í´ë”ì—ì„œ install Certificates.command Â í´ë¦­í•´ì„œ ì¸ì¦ì„œ ì„¤ì¹˜


ì •ì„ëŒ€ë¡œ ì„¤ì¹˜í•˜ë©´ ë¬¸ì œ ìƒê¸¸ í™•ë¥ ì´ ì¤„ì–´ë“¬.
ë¸Œë£¨ë¡œ ì„¤ì¹˜ì‹œ ë¬¸ì œ ìƒê¸¸ ìˆ˜ ìˆìŒ.
íŒŒì´ì¬, pyenv, poetry ê°™ì€ ê²ƒì€ ë¸Œë£¨ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì •ì„ëŒ€ë¡œ ì„¤ì¹˜í•˜ê¸¸ ê¶Œì¥.

pyenvê°€ í™œì„±í™” ë˜ì–´ìˆì„ ì‹œ íŒŒì´ì°¸ì—ì„œ FastAPI í”„ë¡œì íŠ¸ê°€ ì œëŒ€ë¡œ ìƒì„±ë˜ì§€ ì•ŠìŒ.
vim ~/.zshrcë¡œ zshì„¤ì •ì„ ì—´ì–´ì„œ pyenvê°€ ì ìš©ë˜ì§€ ì•Šê²Œ pyenvê´€ë ¨ ì„¤ì •ì„ ëª¨ë‘ ì£¼ì„ì²˜ë¦¬í•˜ë‹ˆê¹Œ ë¨.


--------------
oh my zsh
--------------

zsh - Z Shellì˜ ì•½ìë¡œ ê¸°ì¡´ì˜ bash, ksh, tcshì˜ ë§ì€ ìœ ìš©í•œ ê¸°ëŠ¥ì„ í†µí•©í•œ ìœ ë‹‰ìŠ¤ ì‰˜ì´ë‹¤.
ì‚¬ìš©ìë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ í¸ì˜ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ì„¤ì¹˜í•´ë‘ë©´ í¸ë¦¬í•˜ë‹¤.
ë§¥ì€ ê¸°ë³¸ì ìœ¼ë¡œ zsh

zshì˜ ì¥ì ì¸ ë‹¤ì–‘í•œ í…Œë§ˆë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì•„ë˜ ëª…ë ¹ì–´ë¡œ oh-my-zshì„ ì„¤ì¹˜í•´ì£¼ì.

oh my zsh ì„¤ì¹˜ ì¶”ì²œ

sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"


--------
# Black
--------

    blackì´ë€?
    "The uncompromising Python code formatter"
    (íƒ€í˜‘ ì—†ëŠ”, ì—„ê²©í•œ Python ì½”ë“œ í¬ë§¤í„°)

    ğŸ”§ ë¬´ìŠ¨ ì—­í• ì„ í•˜ë‚˜ìš”?
    Python ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ì •í•´ì§„ ìŠ¤íƒ€ì¼ëŒ€ë¡œ ì •ë¦¬í•´ì¤ë‹ˆë‹¤.

    ê°œë°œìê°€ ì½”ë“œ ìŠ¤íƒ€ì¼ë¡œ ê³ ë¯¼í•˜ì§€ ì•Šë„ë¡ ê°•ë ¥í•œ ê·œì¹™ì„ ì ìš©í•©ë‹ˆë‹¤.

    ì‚¬ëŒë§ˆë‹¤ ìŠ¤íƒ€ì¼ì´ ë‹¤ë¥¸ ê±¸ ë°©ì§€ â†’ íŒ€ í”„ë¡œì íŠ¸ì— íŠ¹íˆ ìœ ë¦¬

    ë¸”ë™(black) ì„¤ì¹˜
    poetry add --group=dev black
    poetry add --group=dev black==24.10.0

    ë¸”ë™ ì‹¤í–‰
    black .  ë˜ëŠ”  poetry run black .
    í˜„ì¬ í´ë”ì— ë¸”ë™ì„ ì ìš©

--------
# Ruff
--------

  ruffëŠ” ìµœê·¼ ë§ì€ Python ê°œë°œìë“¤ì´ flake8, pylint, black ë“±ì˜ ëŒ€ì²´ ë˜ëŠ” ë³´ì™„ì¬ë¡œ ì‚¬ìš©í•˜ê³  ìˆëŠ”
   **ë¹ ë¥´ê³  ê°•ë ¥í•œ Python ì •ì  ë¶„ì„ê¸°(linter + formatter)**ì…ë‹ˆë‹¤.

  ì„¤ì¹˜
    poetry add --group=dev ruff
    poetry add --group=dev ruff==0.8.2

  # ruffì˜ ì£¼ìš” ê¸°ëŠ¥

  ê¸°ëŠ¥               ì„¤ëª…
  Linter            ì½”ë“œì— ì˜ëª»ëœ ìŠ¤íƒ€ì¼, ì˜¤ë¥˜ ê°€ëŠ¥ì„± ë“±ì„ ì•Œë ¤ì¤ë‹ˆë‹¤ (flake8ì²˜ëŸ¼)
  Formatter         blackì²˜ëŸ¼ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ì˜ˆì˜ê²Œ ì •ë¦¬í•´ì¤ë‹ˆë‹¤ (ì˜µì…˜)
  Import ì •ë¦¬        isortì²˜ëŸ¼ import ìˆœì„œë¥¼ ìë™ ì •ë¦¬í•©ë‹ˆë‹¤
  íƒ€ì… ê²€ì‚¬ ì¼ë¶€       mypy ê¸°ëŠ¥ì˜ ì¼ë¶€ë¶„ë„ ì§€ì› (ì´ˆê¸° ë²„ì „ì—ì„œ ì ì  í™•ì¥ ì¤‘)
  ë§¤ìš° ë¹ ë¦„           Python ë„êµ¬ë“¤ë³´ë‹¤ í›¨ì”¬ ë¹ ë¦…ë‹ˆë‹¤. ëª‡ ì²œ íŒŒì¼ë„ ìˆœì‹ê°„ì— ì²˜ë¦¬


  í„°ë¯¸ë„ì— ë¬¸ì œì ì´ ìˆëŠ”ì§€ í™•ì¸
  ruff check

  ë¬¸ì œì ì„ ìë™ìœ¼ë¡œ ìˆ˜ì •
  ruff check --fix


# ì˜ˆì œ st01.py

# ì´ íŠ¹ì • ë¼ì¸ì— ëŒ€í•´ì„œ lintë¥¼ í•˜ê³ ì‹¶ì§€ ì•Šì„ ë•Œ ì£¼ì„ noqaì‚¬ìš©
# noqa ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” importì¼ì§€ë¼ë„ import í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
# import temp2 # noqa  # isort ì˜µì…˜ ì‚¬ìš©í•  ë•Œ ì´ê²ƒ ë•Œë¬¸ì— ë¬´ì‹œ ë  ìˆ˜ ìˆìŒ.

# ì¼ë¶€ëŸ¬ ì•ŒíŒŒë²³ìˆœ
import os
import sys

# ì½”ë“œê°€ ì˜†ìœ¼ë¡œ ê¸¸ë©´ black ì‹¤í–‰ ì‹œ ì´ë ‡ê²Œ ë°”ê¿”ì¤Œ
print(
    "Lif is Tooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo Short!!"
)

# ruffê°€ ê¶Œí•œí•˜ì§€ ì•ŠëŠ” ë³€ìˆ˜ëª…
# O = "abc"


# black .
# poetry run black .



# ê¸°ë³¸ ê·¸ë£¹(select = ["E4", "E7", "E9", "F"]) ê²€ì‚¬
# ruff check
# ruff check --fix

# ì˜¤ì§ I ê·¸ë£¹(import ê´€ë ¨) ë¬¸ì œë§Œ ê²€ì‚¬
# ruff check --select I
# ruff check --select I --fix


# poetry
# pyproject.toml ì„¤ì •
#
# [tool.black]
# line-length = 120  # hard wrap length 120
#
# [tool.ruff]
# target-version = "py313"  # íŒŒì´ì¬ ë²„ì „ 3.13

# ## ë°˜ë“œì‹œ ì§€ì¼œì•¼ í•˜ëŠ” ìŠµê´€
#  - commit í•˜ê¸° ì „ì— ìê¸°ê°€ ë¬´ì—‡ì„ ì»¤ë°‹í•˜ëŠ”ì§€ ê¼­ í™•ì¸í•˜ê¸°!
#  - ë¯¸ì³ ì‚­ì œí•˜ì§€ ì•Šì€ print()ê°€ ì—†ëŠ”ì§€ ê¼­ í™•ì¸í•˜ê¸°
#   - print()ëŠ” "ë¹„ì‹¼ ì—°ì‚°" ì…ë‹ˆë‹¤.

# print()ëŠ” í„°ë¯¸ë„ì— ì…ì¶œë ¥(Input Output)í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ì˜¤ë˜ê±¸ë¦¼.


oy my zsh ì¶”ì²œ
 Zsh ì…¸ì„ ë” ê°•ë ¥í•˜ê³  í¸ë¦¬í•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ì»¤ìŠ¤í„°ë§ˆì´ì§• í”„ë ˆì„ì›Œí¬
 bashë³´ë‹¤ ë” ê°•ë ¥í•œ zsh ì…¸ì„ ê¸°ë°˜ìœ¼ë¡œ í•¨
 í…Œë§ˆ, ìë™ì™„ì„±, í”ŒëŸ¬ê·¸ì¸, git ìƒíƒœ í‘œì‹œ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ ì œê³µ
 macOS ê¸°ë³¸ ì…¸ì´ zshë¡œ ë°”ë€Œë©´ì„œ ë” ë„ë¦¬ ì‚¬ìš©ë¨

----------
# Mypy
----------

ì •ì  íƒ€ì… ê²€ì‚¬(static type checking)**ë¥¼ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë„êµ¬

Mypy ì„¤ì¹˜
 poetry add --group=dev mypy
 poetry add --group=dev mypy==1.13.0

 mypyë¡œ ê²€ì‚¬
 mypy .

 íƒ€ì…íŒíŠ¸ê°€ ì—†ì„ ë• ë‹¤ì´ë‚˜ë¯¹ ìƒíƒœë¡œ ì¸ì‹í•´ ê²€ì‚¬ë¥¼ í•˜ì§€ ì•ŠìŒ.
 íƒ€ì…íŒíŠ¸ê°€ ìˆì„ ë• ìŠ¤í…Œí‹± ìƒíƒœë¡œ ì¸ì‹í•´ ê²€ì‚¬ë¥¼ í•œë‹¤.

 ì»¤ë§¨ë“œ ì‹œí”„íŠ¸ n ëˆ„ë¥´ê³  pytëˆŒëŸ¬ì„œ python ì„ íƒí•˜ë©´ scratch.py íŒŒì¼ì´ ë§Œë“¤ì–´ì§.


# ì˜ˆì œ st03.py

# static ì‹¤í–‰í•˜ê¸° ì „ì— ê²°ì •.
a = "123"
print(a)  # 123

# dynamic
b = input()
print(b) # ì˜ˆìƒ ë¶ˆê°€

mypyëŠ” "ì‹¤í–‰ ì „ì—" ì•Œ ìˆ˜ ìˆëŠ” ê²ƒë“¤ì— ëŒ€í•´ì„œë§Œ ê²€ì‚¬
mypyëŠ” python í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤.


print("12345")
a = 123

# reveal_type(a) # mypyë¡œ ê²€ì‚¬ ìˆ˜í–‰ì‹œ íƒ€ì…ì„ ì•Œë ¤ì¤Œ. mypyë§Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜. íŒŒì´ì¬ìœ¼ë¡œ ì‹¤í–‰í•˜ë©´ ì˜¤ë¥˜ê±¸ë¦¼.

my_int: int = 123  # íƒ€ì… íŒíŠ¸ë¡œ intë¥¼ ì¤¬ëŠ”ë° strì„ ì…ë ¥ ë°›ìœ¼ë©´ mypy ê²€ì‚¬ì‹œ ì˜¤ë¥˜ë‚¨.


# ì¶”ë¡ (inference)
my_int2 = 123  # Literal : ê°’  mypyëŠ” ë¦¬í„°ëŸ´ë¡œë¶€í„° íƒ€ì…ì„ ì¶”ë¡ í•¨.


my_list: list[str] = ["a", "b", "c"]

# ë¶ˆë³€ì„± (immutable)
# íŠœí”Œ íƒ€ì…ì— íƒ€ì… íŒíŠ¸ë¥¼ ì£¼ë ¤ë©´ ê¸¸ì´ë§Œí¼ íƒ€ì…ì„ ì§€ì •
my_tuple: tuple[str,str,str] = ("a", "b", "c")

# ê¸¸ì´ë¥¼ ëª¨ë¥´ëŠ” ê²½ìš°ì— ì–´ë–»ê²Œ í•  ê¹Œ?
my_tuple2: tuple[str, ...] = ("a", "b", "c")

my_dict: dict[str, int] = {"a": 1, "b": 2, "c": 3}

# strì´ë‚˜ intíƒ€ì… ì„¤ì •.
# boolë„ í†µê³¼ëœë‹¤. íŒŒì´ì¬ì˜ boolì´ intë¥¼ ìƒì†ë°›ì•˜ê¸° ë•Œë¬¸ì— ê°€ëŠ¥.
or_type_list: list[str|int] = ["a", 1, "c", 3, False]

def add(a: int, b: int) -> int:
    return a + b

1 + add(1,1)

