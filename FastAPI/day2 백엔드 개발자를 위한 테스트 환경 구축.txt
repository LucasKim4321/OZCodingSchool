# Pytest

  - pytestëŠ” íŒŒì´ì¬ì—ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‰½ê²Œ ì‘ì„±í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬

  ## pytest ì„¤ì¹˜

    poetry add --group=dev pytest
    poetry add --group=dev pytest===8.3.4


# pytest ì‚¬ìš©ì‹œ
# í•¨ìˆ˜ ì´ë¦„ ì•ì— test_ë¼ê³  ì¨ì£¼ë©´ test í•¨ìˆ˜ì¸ê±¸ ì¸ì‹í•œë‹¤.

# íŒŒì´ì°¸ì—ì„œ pytest í•¨ìˆ˜ë¥¼ ë§Œë“¤ë©´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ë²„íŠ¼ì´ ìƒê¸´ë‹¤.
# í„°ë¯¸ë„ì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œ pytest . ì´ë ‡ê²Œ ì…ë ¥í•˜ë©´ ë¨.
def test_simple() -> None:
    print("Testing simple")
    

ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. (ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì‹œë©´ ë©ë‹ˆë‹¤.)
  - í•¨ìˆ˜ ì™¼ìª½ì˜ ì´ˆë¡ìƒ‰ ì‚¼ê°í˜•ì„ ëˆ„ë¥¸ í›„, run ì„ ì„ íƒí•©ë‹ˆë‹¤.
  - í„°ë¯¸ë„ì—ì„œ pytest . ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

ë‹¨ìœ„í…ŒìŠ¤íŠ¸ëŠ” ìš°ë¦¬ê°€ ì‘ì„±í•œ ì½”ë“œê°€ â€œì˜ˆìƒí•œ ëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€â€ ê²€ì¦í•©ë‹ˆë‹¤.
ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ë„ì¤‘ì— í•œ ë²ˆë„ ì˜ˆìƒí•˜ì§€ ëª»í•œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤ë©´ í…ŒìŠ¤íŠ¸ëŠ” â€œì„±ê³µâ€ìœ¼ë¡œ ê°„ì£¼ë˜ê³ , ë°˜ëŒ€ë¡œ ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤ë©´ í…ŒìŠ¤íŠ¸ëŠ” ì‹¤íŒ¨ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.
ìœ„ test_simple() ì€ ì•„ë¬´ê²ƒë„ ê²€ì¦í•˜ì§€ ì•Šì§€ë§Œ, ì‹¤í–‰ ê³¼ì • ë„ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šê³  ëê¹Œì§€ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ì„±ê³µí•œ í…ŒìŠ¤íŠ¸ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.

ì‹¤ì œ í…ŒìŠ¤íŠ¸ì—ì„œ ë¬´ì—‡ì´ë“  ê²€ì¦í•˜ê³ ì í•  ë•Œì—ëŠ” assert ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.
ë‹¨ìˆœ print ëŒ€ì‹  ì¡°ê¸ˆ ë” ë³µì¡í•œ ì˜ˆì‹œë¥¼ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

â–¶ test_simple.py
  - ë‘ ì •ìˆ˜ë¥¼ ë”í•˜ëŠ” í•¨ìˆ˜ add(a: int, b: int) -> None ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.
  - test í•¨ìˆ˜ì— 3ê°€ì§€ step ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.


# st05 test_simple.py

# pytest ì‚¬ìš©ì‹œ
# í•¨ìˆ˜ ì´ë¦„ ì•ì— test_ë¼ê³  ì¨ì£¼ë©´ test í•¨ìˆ˜ì¸ê±¸ ì¸ì‹í•œë‹¤.

# íŒŒì´ì°¸ì—ì„œ pytest í•¨ìˆ˜ë¥¼ ë§Œë“¤ë©´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ë²„íŠ¼ì´ ìƒê¸´ë‹¤.
# í„°ë¯¸ë„ì—ì„œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œ pytest . ì´ë ‡ê²Œ ì…ë ¥í•˜ë©´ ë¨.
def test_simple() -> None:
    print("Testing simple")

    # 0ìœ¼ë¡œ ë¬´ì–¸ê°ˆ ë‚˜ëˆŒ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ZeroDivisionError ì˜¤ë¥˜ê°€ ë‚œë‹¤.
    # print(1/0)

    # ì—ëŸ¬ ë°œìƒì„ ì˜ˆìƒí–ˆê³  ê±°ê¸°ì— ë”°ë¥¸ ì˜ˆì™¸ ì²˜ë¦¬ë„ í–ˆê¸° ë•Œë¬¸ì— ë¬´ì‚¬íˆ ë„˜ì–´ê°ˆ ìˆ˜ ìˆë‹¤.
    try:
        1/0
    except ZeroDivisionError:
        print("Division by zero")

# ì œí’ˆ ì½”ë“œ
def add(a: int, b: int) -> int:
    return a + b

# í…ŒìŠ¤íŠ¸ ì½”ë“œ
def test_add() -> None:
    # Given : ì¬ë£Œë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.
    # ë²„ê·¸ëŠ” "ê²½ê³„"ë¥¼ ì¢‹ì•„í•©ë‹ˆë‹¤.
    # intì˜ ê²½ìš°ì—ëŠ” -1, 0, 1
    a, b = 1, 2

    # When : í…ŒìŠ¤íŠ¸ ëŒ€ìƒì´ ë˜ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
    result = add(a, b) # resultì˜ íƒ€ì…ì€ int

    # Then :
    assert result == 3



# assert 1+1 == 3  # ì—ëŸ¬
# assert 1+1 == 3, "ê³„ì‚°ì´ í‹€ë ¸ìŠµë‹ˆë‹¤"  # ì—ëŸ¬ ê°ì§€ì‹œ ì—ëŸ¬ë¬¸ í‘œì‹œ


st_06 test_delivery.py

from datetime import datetime, timedelta

# literalì„ ì“°ì§€ ì•Šê³  ìƒìˆ˜ë¥¼ ì“°ëŠ” ì´ìœ 
# 2ë¼ëŠ” ìˆ«ìì— "ë°°ì†¡ì¼"ì´ë¼ê³  í‘œê¸°í•˜ê¸° ìœ„í•´
# (ë¯¸ë˜ì˜ ë™ë£Œ, ë¯¸ë˜ì˜ ë‚˜)ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì—­í• 
# magic numberë¥¼ ì“°ì§€ ë§ì
DELIVERY_DAYS = 2

# ë§¤ì§ ë„˜ë²„(Magic number)ëŠ”
# ì½”ë“œì—ì„œ í•˜ë“œ ì½”ë”©ëœ(literal value) ì¼ì •í•œ ê°’ì„ ì˜ë¯¸í•˜ëŠ” ìˆ«ìë‚˜ ë¬¸ìì—´ ë“±ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
# ë§¤ì§ë„˜ë²„ëŠ” ì½”ë“œ ë‚´ì—ì„œ ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©ë˜ì§€ë§Œ ì´ ê°’ì˜ ì˜ë¯¸ë‚˜ ëª©ì ì€ ì½”ë“œì—ì„œ ëª…í™•í•˜ê²Œ ì•Œë ¤ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
# ë§¤ì§ ë„˜ë²„ëŠ” ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µê²Œ ë§Œë“¤ë©°, ì˜ˆìƒì¹˜ ëª»í•œ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì›ì¸ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
# ë”°ë¼ì„œ ë§¤ì§ ë„˜ë²„ ëŒ€ì‹ ì— ìƒìˆ˜ë‚˜ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
# ë³€ìˆ˜ë‚˜ ìƒìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ê°’ì„ ë³€ê²½í•  ë•Œ ì¼ê´„ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì½”ë“œì˜ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ ê°€ë…ì„±ì´ í–¥ìƒë©ë‹ˆë‹¤.

# ì œí’ˆ ì½”ë“œ
def _is_holiday(day: datetime) -> bool:
    "Return day of the week, where Monday == 0 ... Sunday == 6."
    return day.weekday() == 6  # ì¼ìš”ì¼ì´ë©´ True

def get_eta(purchase_date: datetime) -> datetime:
    current_date = purchase_date
    remaining_days = DELIVERY_DAYS

    while remaining_days > 0:
        current_date += timedelta(days=1)
        if not _is_holiday(current_date):
            remaining_days -= 1

    return current_date

# í…ŒìŠ¤íŠ¸ ì½”ë“œ
def test_get_eta_2023_12_01() -> None:
    # Given : ì¬ë£Œë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤.
    order_date = datetime(2023,12,1)

    # When : í…ŒìŠ¤íŠ¸ ëŒ€ìƒì´ ë˜ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
    result = get_eta(order_date)

    # Then : ê²°ê³¼
    assert result == datetime(2023,12,4)

def test_get_eta_2024_12_31() -> None:
    """
    ì‹¤ì „ì—ì„œëŠ” ê³µíœ´ì¼ APIë¥¼ í˜¸ì¶œí•´ì„œ ê³µíœ´ì¼ê¹Œì§€ ê³„ì‚°
    ê³µíœ´ì¼ ì •ë³´ê°€ ì—†ì–´ì„œ 1ì›” 1ì¼ë„ í‰ì¼ë¡œ ì·¨ê¸‰
    """

    result = get_eta(datetime(2024,12,31))
    assert result == datetime(2025, 1, 2)

def test_get_eta_2024_02_28() -> None:
    result = get_eta(datetime(2024, 2, 28))
    assert result == datetime(2024, 3, 1)

def test_get_eta_2023_02_28() -> None:
    result = get_eta(datetime(2023, 2, 28))
    assert result == datetime(2023, 3, 2)

# Xunit ê³„ì—´ í…ŒìŠ¤íŠ¸ì™€ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ì˜ ì—­ì‚¬
# ìš°ë¦¬ê°€ ë°°ìš´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ Xunit ê³„ì—´ í…ŒìŠ¤íŠ¸ ë¼ê³ ë„ ë¶€ë¦…ë‹ˆë‹¤.
# ë‹¨ìœ„í…ŒìŠ¤íŠ¸ì˜ ì‹œì´ˆëŠ” ì¼„íŠ¸ë°±(Kent Beck)ì´ ì²˜ìŒ Small Talk ì—ì„œ ì‘ì„±í•œ SUnit ìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆìŠµë‹ˆë‹¤.
# ì´í›„ ì¼„íŠ¸ë°± ë³¸ì¸ì´ Eric Gamma ë¼ëŠ” ê°œë°œìì™€ í•¨ê»˜ Java ì—ë„ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì¸ Junit ì„ ë§Œë“¤ì—ˆê³  Junit ì€ ëŒ€ì„±ê³µí–ˆìŠµë‹ˆë‹¤.
# ê·¸ ì´í›„ ë¹„ìŠ·í•œ í”„ë ˆì„ì›Œí¬ë“¤ì´ ?Unit ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ìˆ˜ë§ì€ ë‹¤ë¥¸ ì–¸ì–´ì— (íŒŒì´ì¬ì—ëŠ” ë‚´ì¥ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ unit test ì™€ pytest ê°€ ìˆìŠµë‹ˆë‹¤) í¼ì ¸ë‚˜ê°€ê²Œ ë©ë‹ˆë‹¤.


-------------
Coverage
-------------

Coverage(ì»¤ë²„ë¦¬ì§€)ëŠ”
ì†Œí”„íŠ¸ì›¨ì–´ í…ŒìŠ¤íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸ê°€ ì½”ë“œì˜ ì–´ëŠ ë¶€ë¶„ê¹Œì§€ ì‹¤í–‰í–ˆëŠ”ì§€ë¥¼ ì¸¡ì •í•˜ëŠ” ì§€í‘œì…ë‹ˆë‹¤.
ì¦‰, **"ë‚´ê°€ ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ê°€ ì‹¤ì œ ì½”ë“œ ì¤‘ ì–¼ë§ˆë‚˜ ë§ì€ ë¶€ë¶„ì„ ê²€ì‚¬í•˜ê³  ìˆëŠ”ê°€?"**ë¥¼ ìˆ˜ì¹˜ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.

  ì‰½ê²Œ ë§í•˜ë©´ ì „ì²´ ì½”ë“œê°€ 100ì¤„ì¸ë°, í…ŒìŠ¤íŠ¸ë¥¼ ëŒë ¤ë´¤ë”ë‹ˆ 70ì¤„ë§Œ ì‹¤í–‰ëë‹¤ë©´
  â†’ ì»¤ë²„ë¦¬ì§€ëŠ” 70%ì…ë‹ˆë‹¤.

Coverage ì„¤ì¹˜
poetry add --group=dev coverage
poetry add --group=dev coverage==7.6.9

coverage, ì™œ í•„ìš”í•œê°€?

ì €ëŠ” coverage ì¸¡ì •ì´ ì—†ëŠ” ë‹¨ìœ„í…ŒìŠ¤íŠ¸ëŠ” ë°˜ìª½ì§œë¦¬ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.
ì§€ê¸ˆë¶€í„° coverageê°€ ë¬´ì—‡ì¸ì§€, ì™œ ì‚¬ìš©í•´ì•¼ í•˜ë©°, ì–´ë–»ê²Œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ ì˜ˆì œì™€ í•¨ê»˜ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

â–¶ temp.py

ì»¤ë²„ë¦¬ì§€ì˜ ì •ì˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

  (í…ŒìŠ¤íŠ¸ ë„ì¤‘ í•œ ë²ˆì´ë¼ë„ ì‹¤í–‰ëœ ì œí’ˆ ì½”ë“œ) Ã· (ì „ì²´ ì œí’ˆ ì½”ë“œ)

(ì¢€ ë” ê¹Šê²Œ ë“¤ì–´ê°€ë©´ êµ¬ë¬¸ ì»¤ë²„ë¦¬ì§€, ë¶„ê¸° ì»¤ë²„ë¦¬ì§€ ë“± ì»¤ë²„ë¦¬ì§€ë„ ì¢…ë¥˜ê°€ ë§ì€ë°ìš”, ì§€ê¸ˆì€ ìƒê°í•˜ì§€ ì•Šë„ë¡ í•©ì‹œë‹¤.)

ê·¸ë ‡ë‹¤ë©´ ìœ„ temp.py ë¥¼ pytestë¡œ ì‹¤í–‰í–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œì™€ ì‹¤í–‰ì´ ì•ˆë˜ëŠ” ì½”ë“œëŠ” ê°ê° ë¬´ì—‡ì¼ê¹Œìš”?
ì½”ë“œ ë¼ì¸ ë„˜ë²„ë¡œ ëŒ€ë‹µí•´ ë´…ì‹œë‹¤.

ì§ì ‘ ì‹¤í–‰í•˜ê¸° ì „ì— ê°ê° ë‹µì„ ë‚´ì—ˆë‹¤ë©´, ì´ì œ ì‹¤í–‰í•´ ë´…ì‹œë‹¤.

ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì»¤ë²„ë¦¬ì§€ë¥¼ ì¸¡ì •í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.


# ì˜ˆì œ st07_temp.py, st07_test_temp.py

def add(a: int, b: int) -> int:
    return a + b

def mul(a: int, b: int) -> int:
    return a * b

def test_add() -> None:
    # Given
    a, b =  1, 1

    # When
    result = add(a,b)

    # Then
    assert result == 2

(í…ŒìŠ¤íŠ¸ ë„ì¤‘ í•œ ë²ˆì´ë¼ë„ ì‹¤í–‰ëœ ì œí’ˆ ì½”ë“œ) / (ì „ì²´ ì œí’ˆ ì½”ë“œ)

coverage ì„¤ì¹˜
poetry add --group=dev coverage

pytestë¥¼ ì‚¬ìš©í•´ coverageë¥¼ ì‹¤í–‰
poetry run coverage run -m pytest st07_temp.py

ë³´ê³ ì„œ ì‘ì„±
-m, --show-missing
Show line numbers of statements in each module that weren't executed.
poetry run coverage report -m


ê²°ê³¼ : ì´ 8ì¤„ ì¤‘ì— 5ë²ˆ ì¤„ í•œì¤„ì´ ì‹¤í–‰ ë˜ì§€ ì•Šì•˜ìŒì„ ì˜ë¯¸
test ì½”ë“œë„ í¬í•¨ë˜ì„œ ê³„ì‚°ë¨.
Name           Stmts   Miss  Cover   Missing
--------------------------------------------
st07_temp.py       8      1    88%   5
--------------------------------------------
TOTAL              8      1    88%

test ì½”ë“œëŠ” í¬í•¨ ë˜ì§€ ì•Šê²Œ ì„¤ì •
*/test_*.py ì–´ëŠ ê²½ë¡œë“  'test_.py'ë¼ëŠ” ì´ë¦„ì´ ì•ì— í¬í•¨ë˜ë©´ ì œì™¸
[tool.coverage.run]
omit = ["*/test_*.py"]

í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë¸”ë¡ ì„¤ì •í•œ ë‹¤ìŒì— -> ìš°í´ë¦­ refactor -> move í•˜ë©´
ì½”ë“œë§Œ ë”°ë¡œ ë•Œì„œ íŒŒì¼ì„ í•˜ë‚˜ ë§Œë“¬.

ë•Œì–´ë‚¸ íŒŒì´ì¬ ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸
poetry run coverage run -m pytest test_st07_coverage.py

í™•ì¸í•´ë³´ë©´ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì œì™¸ë˜ê³  ì‹¤í–‰ë¨
poetry run coverage report -m

 3/4 75%
ì»¤ë²„ë¦¬ì§€ê°€ 75%ë¡œ ê°ì†Œí–ˆì§€ë§Œ ì´ê²Œ ì •ìƒ.
ì»¤ë²„ë¦¬ì§€ëŠ” ë†’ì„ ìˆ˜ë¡ ì¢‹ìŒ.
Name           Stmts   Miss  Cover   Missing
--------------------------------------------
st07_temp.py       4      1    75%   5
--------------------------------------------
TOTAL              4      1    75%

poetry run coverage html
htmlcov í´ë”ê°€ ìƒê¹€
index.htmlì„ ì—´ì–´ë³´ë©´ ê²°ê³¼ê°€ ì›¹í˜ì´ì§€ì— ë³´ê¸°ì¢‹ê²Œ í‘œì‹œë¨.

## ì •ë¦¬

  - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì „ë¶€ ì‹¤í–‰í•´ë„ í•œ ë²ˆë„ ì‹¤í–‰ë˜ì§€ ì•Šì€ ì½”ë“œëŠ” ê³§ í…ŒìŠ¤íŠ¸ë¥¼ ì•ˆí•œ ì½”ë“œë‹¤.
  - í…ŒìŠ¤íŠ¸ ì•ˆ ëœ ì§€ì ì—ì„œ ë²„ê·¸ê°€ ë‚˜ë©´ í•  ë§ì´ ì—†ë‹¤. (í…ŒìŠ¤íŠ¸ ì•ˆ í•œ ê°œë°œìì˜ ì˜ëª»)
  - ë”°ë¼ì„œ ì»¤ë²„ë¦¬ì§€ ê³„ì‚°ì„ í†µí•´ â€œì§€ê¸ˆ ë‚´ê°€ ìˆ˜ì •í•œ ì½”ë“œê°€ ì œëŒ€ë¡œ í…ŒìŠ¤íŠ¸ ë˜ê³  ìˆëŠ”ê°€â€ ë¥¼ íŒë‹¨í•  í•„ìš”ê°€ ìˆë‹¤.
  - ì»¤ë²„ë¦¬ì§€ì˜ ì •ì˜ëŠ” (í…ŒìŠ¤íŠ¸ ë„ì¤‘ í•œë²ˆì´ë¼ë„ ì‹¤í–‰ëœ ì œí’ˆì½”ë“œ) Ã· (ì „ì²´ì œí’ˆì½”ë“œ) ì´ë‹¤.
  - ì»¤ë²„ë¦¬ì§€ë¥¼ ê³„ì‚°í•  ë•Œ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” omit í•˜ê³ , ì œí’ˆ ì½”ë“œë§Œ ê³„ì‚°ì— ë“¤ì–´ê°€ë„ë¡ í•´ì•¼ í•œë‹¤.

  - ì»¤ë²„ë¦¬ì§€ ì‹¤í–‰ì„ í•˜ë ¤ë©´
    - poetry run coverage run -m pytest .
    - poetry run coverage report -m
    - poetry run coverage html
  ì„ í•˜ë©´ ë©ë‹ˆë‹¤.


----------------
Dev dependency
----------------

â–¶ dev dependency

    ì§€ê¸ˆê¹Œì§€ group=devë¥¼ ì‚¬ìš©í•´ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ group=devëŠ” ì–´ë–¤ ì˜ë¯¸ì¼ê¹Œìš”?

    â–¶ pyproject.toml

    ì¢…ì†ì„±ì€ 2ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - ì„œë²„ê°€ ì‹¤í–‰ë˜ëŠ” ì¤‘ì— í•„ìš”í•œ ì¢…ì†ì„± (ì˜ˆ: fastapi, uvicorn, pydantic)
      - ê°œë°œí•˜ëŠ” ì¤‘ì—ë§Œ í•„ìš”í•˜ê³ , ì„œë²„ê°€ ì‹¤í–‰ë˜ëŠ” ë„ì¤‘ì—ëŠ” ì „í˜€ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì¢…ì†ì„±

    group=dev â†’ â€œì´ ì¢…ì†ì„±ì€ ê°œë°œí•  ë•Œë§Œ í•„ìš”í•˜ê³ , ì„œë²„ê°€ ì‹¤í–‰ë  ë•Œì—ëŠ” í•„ìš”í•˜ì§€ ì•Šë‹¤â€ ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.
    ë”°ë¼ì„œ ì§€ê¸ˆê¹Œì§€ black, ruff, mypy, pytest, coverage ë“±ì„ ëª¨ë‘ dev groupìœ¼ë¡œ ì§€ì •í•˜ì—¬ ì„¤ì¹˜í•˜ì˜€ìŠµë‹ˆë‹¤.

    ì´ë ‡ê²Œ ì¢…ì†ì„±ì„ ë¶„ë¦¬í•´ì„œ ê´€ë¦¬í•˜ë©´ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ â€œì“°ì§€ ì•Šì„ ì¢…ì†ì„±â€ì„ ì„¤ì¹˜í•˜ëŠë¼ ì‹œê°„ê³¼ ê³µê°„ì„ ë‚­ë¹„í•  í•„ìš”ê°€ ì—†ì–´ì§‘ë‹ˆë‹¤.
    íŠ¹íˆ ec2 í™˜ê²½ë³´ë‹¤ëŠ” docker í™˜ê²½ì—ì„œ(kubernetes) ì¢…ì†ì„± ë¶„ë¦¬ê°€ ë¹›ì„ ë°œí•©ë‹ˆë‹¤.
      - ë§¤ë²ˆ ì—…ë°ì´íŠ¸ ì‹œë§ˆë‹¤ docker ì´ë¯¸ì§€ë¥¼ ìƒˆë¡œ ë¹Œë“œí•˜ëŠ”ë°, ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆ ìì²´ê°€ ì¤„ì–´ë“œë‹ˆ ì €ì¥ ë¹„ìš©ì´ ê°ì†Œí•©ë‹ˆë‹¤.
      - ë§¤ë²ˆ ë°°í¬ì‹œë§ˆë‹¤ ìƒˆ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ê³  ì‹¤í–‰í•˜ëŠ”ë°, ì´ë•Œë„ ì‚¬ì´ì¦ˆê°€ ì‘ìœ¼ë©´ ë” ë¹ ë¥´ê²Œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    dev group ì„ ì œì™¸í•˜ê³  ì„¤ì¹˜ë¥¼ í•˜ë ¤ë©´ poetry install --no-root --only main ì„ í•˜ë©´ ë©ë‹ˆë‹¤.

      - no-root: poetry ê¸°ë³¸ ì„¤ì •ì€ í”„ë¡œì íŠ¸ë¥¼ ì–´í”Œë¦¬ì¼€ì´ì…˜(íšŒì‚¬ê°€ ì§ì ‘ ì‚¬ìš©í•  ì„œë²„ ë“±ë“±.ë‹¤ë¥¸ ì‚¬ëŒì´ ê°€ì ¸ê°€ë¼ê³  ë§Œë“  ê²ƒì´ ì•„ë‹˜)ì´ ì•„ë‹ˆë¼
                 ë¼ì´ë¸ŒëŸ¬ë¦¬(ë‹¤ë¥¸ ì‚¬ëŒì´ ê°€ì ¸ë‹¤ ì“¸ ìˆ˜ ìˆë„ë¡ ë§Œë“  í”„ë¡œê·¸ë¨)ë¡œ ê°„ì£¼í•˜ëŠ”ë°ìš”,
                 no-root ì˜µì…˜ì„ ì‚¬ìš©í•´ì•¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ìœ¼ë¡œ ì¸ì‹í•´ì„œ ìê¸° ìì‹ (root) ì„ ì„¤ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                 (ì°¸ê³ : ğŸ§· Commands | Documentation | Poetry - Python dependency manage...)

      - only main: dev groupì´ ì•„ë‹Œ main ê·¸ë£¹ë§Œ ì„¤ì¹˜í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.


ìë™í™” í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•œ ì´ìœ 
í…ŒìŠ¤íŠ¸ì•¼ ë§ë¡œ ê¸°ìˆ ìì‚°ì…ë‹ˆë‹¤.

    ê¸°ìˆ ë¶€ì±„ë¼ëŠ” ë§ ë“¤ì–´ë³´ì…¨ë‚˜ìš”? ê°œë°œí•˜ë©´ì„œ ë‚´ë¦° ë‚˜ìœ ì˜ì‚¬ê²°ì •ì´ ë¹šì²˜ëŸ¼ ìŒ“ì—¬ì„œ ê²°êµ­ í”„ë¡œì íŠ¸ë¥¼ íŒŒë©¸ë¡œ ì´ëˆë‹¤ëŠ” ë§ì´ì£ .

    ìˆ˜ ë§Œ ì¤„ì´ ë„˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¼ë¶€ë¶„ì„ ìˆ˜ì •í–ˆì„ ë•Œ, ê·¸ ì¼ë¶€ë¶„ì´ ë²„ê·¸ ì—†ì´ ì—¬ëŸ¬ë¶„ì´ ì˜ˆìƒí•˜ëŠ” ëŒ€ë¡œ ë™ì‘í•  ê²ƒì´ë¼ê³  ì–´ë–»ê²Œ ë³´ì¥í• ê¹Œìš”?
    ìë™í™” í…ŒìŠ¤íŠ¸ì•¼ ë§ë¡œ ì—¬ëŸ¬ë¶„ì´ "ìˆ˜ì •"ì„ ë‘ë ¤ì›Œ í•˜ì§€ ì•Šë„ë¡ ë§Œë“¤ì–´ì£¼ëŠ” ê°•ë ¥í•œ ë¬´ê¸°ì…ë‹ˆë‹¤.

    ë§ˆí‹´íŒŒìš¸ëŸ¬ëŠ” ê·¸ì˜ ì €ì„œ ë¦¬íŒ©í† ë§(2íŒ) ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë§í–ˆìŠµë‹ˆë‹¤.

    í…ŒìŠ¤íŠ¸ ìŠˆíŠ¸ê°€ ì—†ìœ¼ë©´ ê°œë°œìëŠ” ìì‹ ì´ ìˆ˜ì •í•œ ì½”ë“œê°€ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•  ë°©ë²•ì´ ì—†ë‹¤.
    í…ŒìŠ¤íŠ¸ ìŠˆíŠ¸ê°€ ì—†ìœ¼ë©´ ì‹œìŠ¤í…œ ì´ìª½ì„ ìˆ˜ì •í•´ë„ ì €ìª½ì´ ì•ˆì „í•˜ë‹¤ëŠ” ì‚¬ì‹¤ì„ ê²€ì¦í•˜ì§€ ëª»í•œë‹¤.
    ê·¸ë˜ì„œ ê²°í•¨ìœ¨ì´ ë†’ì•„ì§€ê¸° ì‹œì‘í•œë‹¤. ì˜ë„í•˜ì§€ ì•Šì€ ê²°í•¨ ìˆ˜ê°€ ë§ì•„ì§€ë©´ ê°œë°œìëŠ” ë³€ê²½ì„ ì£¼ì €í•œë‹¤.

    ì œê°€ ì²˜ìŒ ìˆì—ˆë˜ ìŠ¤íƒ€íŠ¸ì—…ì—ì„œëŠ” ìë™í™” í…ŒìŠ¤íŠ¸ê°€ ì—†ì—ˆëŠ”ë°ìš”, ë°°í¬ ì „ì— ëŠ˜ ì „ ì§ì›ì´ ìƒí’ˆì„ ê²°ì œí•´ë³´ê³  ì¼ì´ í™˜ë¶ˆí–‰ì‚¬ì˜€ìŠµë‹ˆë‹¤.
    ê·¸ëŸ°ë° ì´ëŸ° ì¼ì´ ë°˜ë³µë˜ë‹¤ ë³´ë‹ˆê¹Œ ì ì  í•˜ê¸° ì‹«ì€ ì¼ì´ ë˜ë”ë¼êµ¬ìš”. ì ì  ë¹¨ë¦¬, ëŒ€ì¶© í•˜ê²Œ ë˜ê³  ê²°ì œì˜ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ì»¤ë²„í•˜ê¸°ê°€ ì–´ë ¤ì›Œì¡ŒìŠµë‹ˆë‹¤.
    ì–´ëŠ ë‚  ê²°ì œê°€ ì•ˆë˜ëŠ” ë²„ê·¸ë¥¼ ì œê°€ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ í…ŒìŠ¤íŠ¸ê°€ ì—†ì—ˆê¸° ë•Œë¬¸ì— ê³ ê°ìœ¼ë¡œë¶€í„° "ê²°ì œê°€ ì•ˆ ë¼ìš”"ë¼ëŠ” ë¬¸ì˜ì „í™”ê°€ ì˜¤ê³  ë‚˜ì„œì•¼ ê·¸ ì¼ì„ ì•Œê²Œ ë˜ì—ˆì£ .

    ê·¸ë•Œê°€ ë˜ë©´ ì´ë¯¸ ëŠ¦ì—ˆìŠµë‹ˆë‹¤. ê³ ê°ì—ê²Œ ì•ˆ ì¢‹ì€ ê²½í—˜ì´ ì¼ì–´ë‚œ ê²ƒì´ì£ .
    ì´ëŸ° ì¼ì´ ë°˜ë³µë˜ë©´ ì ì  ì½”ë”©ì„ í•˜ëŠ”ê²Œ ë‘ë ¤ì›Œ ì§‘ë‹ˆë‹¤. ì§€ê¸ˆ ì˜ ëŒì•„ê°€ëŠ” ì½”ë“œì—ì„œ ì•„ì£¼ ì¡°ê¸ˆë§Œ ìˆ˜ì •ì„ í•´ë„ ì–´ë””ì—ì„œ ë²„ê·¸ê°€ ë°œìƒí•˜ëŠ”ì§€ ë„ë¬´ì§€ ì•Œ ìˆ˜ê°€ ì—†ëŠ” ê²ƒì´ì£ 
    í…ŒìŠ¤íŠ¸ëŠ” ì—¬ëŸ¬ë¶„ì´ ì‘ì„±í•œ ì½”ë“œê°€ ì˜ë„í•œ ëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ë¥¼ ê²€ì¦í•´ ì¤ë‹ˆë‹¤. ì‚¬ëŒì´ ì•„ë‹ˆë¼ ì½”ë“œë¡œ ì½”ë“œë¥¼ ê²€ì¦í•˜ê¸° ë•Œë¬¸ì— ë°˜ë³µì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ”ë° ì•„ì£¼ ìœ ë¦¬í•©ë‹ˆë‹¤.
    ì»´í“¨í„°ëŠ” ì‹¤ìˆ˜ë„ í•˜ì§€ ì•Šê³ , ë°˜ë³µë˜ëŠ” ì‘ì—…ì— ì§€ì¹˜ëŠ” ì¼ë„ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
    ê²°ê³¼ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ëŠ” ê°œë°œìê°€ â€œìˆ˜ì •ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šë„ë¡ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.â€ ì´ê²ƒì´ ì—¬ëŸ¬ë¶„ì—ê²Œ í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•œ ì´ìœ ì…ë‹ˆë‹¤.

    í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
â–¶ pytest_asyncio ì„¤ì¹˜ì™€ ì„¤ì •
  poetry add --group=dev pytest-asyncio
  poetry add --group=dev pytest-asyncio==0.25.0

â–¶ pyproject.toml

    # ì´ˆëµ
    [tool.pytest.ini_options]
    asyncio_mode = "auto"
    asyncio_default_fixture_loop_scope = "session"

  ì•„ì§ async test ë¥¼ ë§Œë“ ì ì€ ì—†ì§€ë§Œ, ë¯¸ë¦¬ ì¶”ê°€í•´ë‘ê² ìŠµë‹ˆë‹¤.

  pytestëŠ” ê¸°ë³¸ì ìœ¼ë¡œ async test ë¥¼ ë¬´ì‹œí•˜ëŠ”ë°, pytest-asyncio í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë©´ async í•¨ìˆ˜ë„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  async ê°€ ë¬´ì—‡ì¸ì§€ëŠ” ì¶”í›„ì— ìì„¸í•˜ê²Œ ë‹¤ë£¨ë ¤ê³  í•©ë‹ˆë‹¤. (ê¹Šì€ ì›ë¦¬ë¥¼ ì´í•´í•˜ëŠ”ê²Œ ìƒë‹¹íˆ ë³µì¡í•œë°, ì›ë¦¬ë¥¼ ë‹¤ ì•Œë©´ ëª¨ë“  ê°•ì˜ë¥¼ ë”°ë¼ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)

â–¶ test.sh ìƒì„±

  ì§€ê¸ˆê¹Œì§€ ì„¤ì¹˜í•œ ëª¨ë“  CI ë„êµ¬ë“¤ì„ í•œ ë²ˆì— ì‹¤í–‰í•´ì£¼ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤!

  #! : ì‹œë±…ì´ë¼ê³  ë¶€ë¦„

  shell
    #!/usr/bin/env bash       
    set -eo pipefail

    COLOR_GREEN=`tput setaf 2;`
    COLOR_NC=`tput sgr0`; # No Color

    echo "Starting black"
    poetry run black .
    echo "OK"

    echo "Starting ruff"
    poetry run ruff check --select I --fix
    poetry run ruff check --fix
    echo "OK"

    echo "Starting mypy"
    poetry run mypy .
    echo "OK"

    echo "Starting pytest with coverage"
    poetry run coverage run -m pytest
    poetry run coverage report -m
    poetry run coverage html
    echo "OK"

    echo "${COLOR_GREEN}ALL tests passed successfully!${COLOR_NC}"


# ì˜ˆì œ st08_test_pytest_asyncio.py

ì˜¤ë¥˜ì—†ì´ ì½”ë”© í›„
ì½”ë“œ í¬ë§¤í„°ë¡œ í¬ë©”íŒ…
black .

$? ê°€ì¥ ìµœê·¼ì— ì‹¤í–‰ëœ ëª…ë ¹ì–´ì˜ ì¢…ë£Œ ìƒíƒœ(exit code)ë¥¼ ì¶œë ¥í•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.
echo $?

ì¶œë ¥ 0 ë¬¸ì œ ì—†ìŒ
0 ì´ìƒì´ë©´ ë¬¸ì œ ìˆìŒ

ì˜¤ë¥˜ê°€ ìˆëŠ” ì½”ë“œë¥¼ ì§  í›„
black .

echo $? 

ì¶œë ¥ì´ 0ë³´ë‹¤ í¬ë©´ ë¬¸ì œìˆìŒ.


./test.sh

chmod +x ./test.sh



test.ps1 ìƒì„± (ìœˆë„ìš° powershell ì‚¬ìš©ìë¥¼ ìœ„í•´ì„œ)

ì£¼ì˜: ìœˆë„ìš°ëŠ” ë‹¤ì–‘í•œ í„°ë¯¸ë„ì´ ìˆëŠ”ë°ìš”, (cmd, powershell, WSL) powershell ì—ì„œë§Œ ë™ì‘í•˜ëŠ” ps1 íŒŒì¼ì…ë‹ˆë‹¤. (powershell ì„ ê¶Œì¥í•©ë‹ˆë‹¤!)

    powershell
        poetry run black .
        if(!$?) { throw }

        poetry run ruff check --select I --fix
        if(!$?) { throw }

        poetry run ruff check --fix
        if(!$?) { throw }

        poetry run mypy .
        if(!$?) { throw }

        poetry run pytest .
        if(!$?) { throw }

Write-Host "Done" -ForegroundColor Green
# refer: https://stackoverflow.com/questions/47032005/why-does-a-powershell-scr





Github action
github action ìŠ¤í¬ë¦½íŠ¸ ìƒì„±

ë§¤ë²ˆ github ì— push í•  ë•Œë§ˆë‹¤ black ë¶€í„° pytest ê¹Œì§€ ëª¨ë“  ê²€ì‚¬ê°€ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.

â–¶ .github/workflows/ci.yml
    name: CI

    on:
    push:

    jobs:
    static-analysis:
        runs-on: ubuntu-22.04
        steps:
        - name: Check out the codes
            uses: actions/checkout@v2

        - name: Setup python environment
            id: setup-python
            uses: actions/setup-python@v2
            with:
            python-version: "3.13"

        - name: Install Poetry
            run: |
            curl -sSL https://install.python-poetry.org | python3 - --version

        - name: Register Poetry bin
            run: echo "${HOME}/.poetry/bin" >> $GITHUB_PATH

        - name: Install dependencies
            run: poetry install --no-root

        - name: Run Black
            run: poetry run black . --check

        - name: Run Ruff
            run: |

on: push â†’ ì•¡ì…˜ì´ ì–¸ì œ ì‹¤í–‰ë˜ëŠ”ì§€ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. on: push ë¼ë©´, push í•  ë•Œë§ˆë‹¤ ì‹¤í–‰í•©ë‹ˆë‹¤.
https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#on

jobs â†’ í•˜ë‚˜ì˜ workflow ëŠ” ì—¬ëŸ¬ê°œì˜ job ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#jobs

2ê°œì˜ job ì„ ìƒì„±í–ˆìŠµë‹ˆë‹¤. static-analysis ì™€ test job ì„ 2ê°œë¡œ ìª¼ê°  ì´ìœ ëŠ” ì‹¤í–‰ ì†ë„ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ê°€ ì ì  ì»¤ì§€ê²Œ ë˜ë©´ ê°€ì¥ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì´ mypy ì‹¤í–‰ê³¼ ì „ì²´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì¸ë°, ì´ ë‘˜ì„ ì„œë¡œ ìª¼ê°œ ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ë©´ ì „ì²´ CI ê°€ ë” ë¹¨ë¦¬ ëë‚©ë‹ˆë‹¤.

runs-on â†’ job ì´ ì‹¤í–‰ë˜ëŠ” machine ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
https://docs.github.com/en/actions/learn-github-actions/workflow-syntax-for-github-actions#jobsjob_idruns-on

steps â†’ í•˜ë‚˜ì˜ job ì€ ì—¬ëŸ¬ê°œì˜ step ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. step ì€ ëª…ë ¹ì„ ì‹¤í–‰í•˜ê±°ë‚˜ ë‹¤ë¥¸ action ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

uses â†’ ì‹¤í–‰í•  action ì„ ê°€ë¦¬í‚µë‹ˆë‹¤.

with â†’ action ì— ì „ë‹¬í•  parameter ë³€ìˆ˜ì…ë‹ˆë‹¤.

run â†’ ì‹¤í–‰í•  ëª…ë ¹ì–´ì…ë‹ˆë‹¤.

run: | yaml ë¬¸ë²•ì…ë‹ˆë‹¤. | (íŒŒì´í”„ë¼ì¸)ì„ ì‚¬ìš©í•´ value ê°€ ì—¬ëŸ¬ ì¤„ (multiline) ì´ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.


name: CI

on:   # ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì¡°ê±´ ì„¤ì •
  workflow_dispatch:  # ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì›Œí¬í”Œë¡œìš°ë¥¼ ì •ì˜
                      # push, pull_requestì²˜ëŸ¼ ìë™ ì‹¤í–‰ë˜ì§€ ì•Šê³ ,
                      # GitHub ì›¹ UIì—ì„œ "Run workflow" ë²„íŠ¼ì„ ëˆŒëŸ¬ì•¼ ì‹¤í–‰ë©ë‹ˆë‹¤.
  pull_reqeust:   # pull_reqeustê°€ ì¼ì–´ë‚  ë•Œ
  push:   # pushí•  ë•Œ

jobs:  # í•  ì¼ ì„¤ì •.  ì—¬ëŸ¬ê°œ ì„¤ì • ê°€ëŠ¥
# jobs ì‹¤í–‰ ìˆœì„œ ì„¤ì • ê°€ëŠ¥



name: CI

on:
  push:


jobs:
  static-analysis:  # mypy, black, ruff ë“± ì •ì  ë¶„ì„
    runs-on: ubuntu-22.04  # ê°€ìƒ ìš´ì˜ì²´ì œ í™˜ê²½ì—ì„œ ì‹¤í–‰ë¨. ì‹¤ì œ í”„ë¡£ë•ì…˜(ë°°í¬)í™˜ê²½ì—ì„œëŠ” ëª¨ë“  ë²„ì „ì„ ê³ ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
    # ì˜ˆê¸°ì¹˜ ëª»í•˜ê²Œ ë²„ì „ì´ ì˜¬ë¼ê°€ì„œ ì¥ì• ê°€ ìƒê¸°ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ ë²„ì „ì„ ê³ ì •
    steps:
      # ê°€ì¥ ìµœì‹  ë¸Œëœì¹˜ì™€ ì»¤ë°‹ì„ ê°€ì ¸ì˜´
      - name: Check out the codes
        uses: actions/checkout@v2

      - name: Setup python environment
        id: setup-python
        uses: actions/setup-python@v2
        with:
          python-version: "3.13"


  test:   # ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
    