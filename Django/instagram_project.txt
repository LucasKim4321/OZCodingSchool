ì¸ìŠ¤íƒ€ê·¸ë¨ í”„ë¡œì íŠ¸

DB êµ¬ì¡°

ìœ ì €(email ê¸°ë°˜)
	ì†Œì…œ ë¡œê·¸ì¸
	íŒ”ë¡œìš°, íŒ”ë¡œì›Œ
í¬ìŠ¤íŠ¸(ë¸”ë¡œê·¸ë‘ ë¹„ìŠ·)
	ëŒ“ê¸€
	ì¢‹ì•„ìš”
	íƒœê·¸

ê¸°ëŠ¥

íšŒì›ê´€ë ¨
	íšŒì›ê°€ì…, ë¡œê·¸ì¸, ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°
	ì†Œì…œë¡œê·¸ì¸
	íŒ”ë¡œìš°, íŒ”ë¡œìš° ì·¨ì†Œ
	íŒ”ë¡œìš°/ íŒ”ë¡œì›Œ ìˆ˜ ë° ëª©ë¡ ì¡°íšŒ
	
í¬ìŠ¤íŠ¸
	í¬ìŠ¤íŠ¸ ìƒì„±, ìˆ˜ì •, ì‚­ì œ, ë‚˜ë§Œë³´ê¸°(ì¹œí•œì‚¬ëŒë§Œ ë³´ê¸°)
	ëŒ“ê¸€ ì‘ì„±, ìˆ˜ì •, ì‚­ì œ
	ë¼ì´í¬
	ë¬´í•œìŠ¤í¬ë¡¤ ê¸°ëŠ¥(í¬ìŠ¤íŠ¸, ëŒ“ê¸€)
	
ETC
DM, ë¦´ìŠ¤

mkdir pystagram
pyenv virtualenv 3.12.2 oz_pystagram
pyenv local oz_pystagram
poetry init
poetry add django
django-admin startproject config .

íŒŒì´ì°¸ ê¸°ë³¸ ì…‹íŒ…
ì¸í„°í”„ë¦¬í„° ì„¤ì •
ë ê·€ì§€ ì„¤ì •

ì´ë©”ì¼ ê¸°ë°˜ì´ë¼ ìœ ì €ë¥¼ ì»¤ìŠ¤í„° ë§ˆì´ì§• í•´ì•¼í•¨
ë§ˆì´ê·¸ë ˆì´ì…˜ í•˜ê¸°ì „ì— ë¨¼ì € ì„¤ì • í•˜ê³  í•´ì•¼í•¨

ë§´ë²„ ì•± ìƒì„±
python3 manage.py startapp member


member/models.py
from django.contrib.auth.base_user import AbstractBaseUser, BaseUserManager
from django.db import models

# ì‚¬ìš©ì ì§€ì • ë©”ë‹ˆì ¸
class UserManager(BaseUserManager):
    def create_user(self, email, password):
        if not email:
            raise ValueError('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.')
        user = self.model (
            email = self.normalize_email(email),
        )
        user.set_password(password) # í•´ì‹œí™”
        user.is_active = False
        user.save(using = self._db)
        return user

    def create_superuser(self, email, password):
        user = self.create_user(email, password)
        user.is_admin = True
        user.is_active = True
        user.save(using=self._db)
        return user

# ì•”í˜¸í™”ëŠ” ë³µí˜¸í™”ê°€ ê°€ëŠ¥í•¨
# ì•”í˜¸í™”ëŠ” qwer1234 -> aslkfjdslkfj322kj43 -> ë³µí˜¸í™” -> qwer1234
# í•´ì‹œí™”ëŠ” ë³µí˜¸í™”ê°€ ë¶ˆê°€ëŠ¥í•¨
# í•´ì‹œí™” qwer1234 -> aslkfjdslkfj322kj43 -> ì¼ë¶€ë¶„ ì•”í˜¸í™”(aslkfj) -> ì•”í˜¸í™”ë¥¼ ë°˜ë³µ -> sldkfjsdlf -> ì†Œì‹¤ëœ ë¶€ë¶„ ë•Œë¬¸ì— ë³µí˜¸í™”ê°€ ë¶ˆê°€ëŠ¥
# ì¥ê³ ëŠ” SHA256ë¥¼ ì‚¬ìš©
# SHA-256ì€ ì•”í˜¸í•™ì—ì„œ ì‚¬ìš©í•˜ëŠ” í•´ì‹œ í•¨ìˆ˜(hash function) ì¤‘ í•˜ë‚˜ì˜ˆìš”. ì£¼ë¡œ ë°ì´í„° ë¬´ê²°ì„± í™•ì¸, ë¹„ë°€ë²ˆí˜¸ ì €ì¥, ë””ì§€í„¸ ì„œëª…, ë¸”ë¡ì²´ì¸ ê°™ì€ ê³³ì— ì“°ì„.

class User(AbstractBaseUser):  # ê¸°ë³¸ ê¸°ëŠ¥ì€ ìƒì†ë°›ì•„ì„œ ì‚¬ìš©
    email = models.EmailField(
        verbose_name='email',
        unique = True
    )
    is_active = models.BooleanField(default = False) # ê¸°ë³¸ì ìœ¼ë¡œ ë¹„í™œì„±í™” ì‹œì¼œë†“ê³  í™•ì¸ í›„ í™œì„±í™”
    is_admin = models.BooleanField(default = False)  # admin ê¸°ëŠ¥
    # is_staff = models.BooleanField(default = False)  # is_staff ê¸°ëŠ¥
    # is_superuser = models.BooleanField(default = False)  # is_superuser ê¸°ëŠ¥
    nickname = models.CharField('nickname', max_length=20, unique=True)

    # ì‚¬ìš©ì ì§€ì • ë©”ë‹ˆì ¸
    # User.objects.all()   <- objectsê°€ ë©”ë‹ˆì ¸
    objects = UserManager()  # ë©”ë‹ˆì ¸ëŠ” UserManager()
    USERNAME_FIELD = 'email'  # ê¸°ë³¸ ìœ ì €ë„¤ì„(ì•„ì´ë””)ë¥¼ emailë¡œ ì§€ì •
    EMAIL_FIELD = 'email'
    REQUIRED_FIELDS = []

    class Meta:
        verbose_name = 'ìœ ì €'
        verbose_name_plural = f'{verbose_name} ëª©ë¡'

    def get_full_name(self): # ì‚¬ìš©ìì˜ ì „ì²´ ì´ë¦„(Full name)ì„ ë°˜í™˜. ì„±ê³¼ ì´ë¦„ì„ í•©ì¹¨
        # return f"{self.first_name} {self.last_name}"
        return self.nickname

    def get_short_name(self):  # ì¼ë°˜ì ìœ¼ë¡œ ë‹‰ë„¤ì„, ì´ë¦„(first name) ë“±ì„ ë°˜í™˜
        return self.nickname

    def __str__(self):
        return self.nickname

    def has_perm(self, perm, obj=None):
        return True

    def has_module_perms(self, app_label):
        return True

    @property
    def is_staff(self):
        return self.is_admin

    @property
    def is_superuser(self):
        return self.is_admin

# @property
# í•¨ìˆ˜ëŠ” user.is_superuser() ì´ë ‡ê²Œ ì“°ëŠ”ê±¸ user.c ì´ë ‡ê²Œ ë³€ìˆ˜ì²˜ëŸ¼ ì“¸ ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì¤Œ
# ê¸°ì¡´ì— ì¡´ì¬í•˜ëŠ” ì»¬ëŸ¼ is_superuser, is_superuserê°€ ê°€ì§„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ê³  ì‚¬ìš©.
# í˜¹ì€  is_superuser = models.BooleanField(default = False) ì´ë ‡ê²Œ í•„ë“œë¥¼ ë§Œë“¤ì–´ ì¤˜ë„ ë˜ì§€ë§Œ í•´ë‹¹ í•„ë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ê±°ê¸° ë•Œë¬¸ì— @propertyì‚¬ìš©

# AbstractBaseUser: Djangoì˜ ì¶”ìƒ ê¸°ë°˜ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ë¡œ, ë¹„ë°€ë²ˆí˜¸ ë° ì¸ì¦ ê´€ë ¨ í•„ë“œì™€ ë©”ì„œë“œë§Œì„ ì œê³µí•˜ë©°, ì‚¬ìš©ì ì •ì˜ í•„ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ì™„ì „í•œ User ëª¨ë¸ì„ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


settings.py

ì„¤ì¹˜ëœ ì•± ëª©ë¡ì— memeberì•± ì¶”ê°€
INSTALLED_APPS = [
    # own
    'member',
]

ìµœí•˜ë‹¨ì— 
# Auth
AUTH_USER_MODEL = 'member.User'  # ìœ ì € ëª¨ë¸ ì§€ì •

ë§ˆì´ê·¸ë ˆì´ì…˜
python3 manage.py makemigrations
python3 manage.py migrate

poetry add django-extentions
poetry add ipython

ì„¤ì¹˜ëœ ì•± ëª©ë¡(INSTALLED_APPS)ì— ì¶”ê°€
INSTALLED_APPS = [
    # 3rd party
    'django_extensions',
]

superuser ìƒì„±
python manage.py createsuperuser
ì»¤ìŠ¤í…€ ìœ ì € ëª¨ë¸ì— ìœ ì € ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ëª¨ë‘ ì´ë©”ì¼ë¡œ ì§€ì •í–ˆê¸° ë•Œë¬¸ì— ìœ ì € ì´ë¦„ì„ ë¬»ì§€ ì•Šê³  ì´ë©”ì¼ë§Œ ë¬¼ì–´ë´„


# ê°œë°œ í™˜ê²½ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²½ë¡œ
STATIC_URL = 'static/'
STATIC_DIR = BASE_DIR / 'static'

STATICFILES_DIRS = [
    STATIC_DIR,
]

# ë°°í¬í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ê²½ë¡œ
STATIC_ROOT = BASE_DIR / '.static_root'


# member/forms.py

from django import forms
from django.contrib.auth import get_user_model
from django.contrib.auth.forms import UserCreationForm

# ìœ ì € ëª¨ë¸ ê°€ì ¸ì˜¤ê¸°
# get_user_model()ì„ í•˜ë©´ settingsì— ì„¤ì •ëœ AUTH_USER_MODEL ì„ ê°€ì ¸ì˜´
# Authìœ ì €ë¥¼ ë°”ê¿¨ê¸° ë•Œë¬¸ì—
User = get_user_model()

class SignupForm(UserCreationForm):

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        # class_default_fields = ('password1', 'password2')
        # for field in class_default_fields:
        for field in ('password1', 'password2'):
            self.fields[field].widget.attrs['class'] = 'form-control'
            self.fields[field].widget.attrs['placeholder'] = 'password'
            if field.startswith('password1'):
                self.fields[field].label = 'ë¹„ë°€ë²ˆí˜¸'
            else:
                self.fields[field].label = 'ë¹„ë°€ë²ˆí˜¸ í™•ì¸'


    class Meta(UserCreationForm.Meta):
        model = User
        fields = ('email', 'nickname',)
        labels = {
            'email' : 'ì´ë©”ì¼',
            'nickname': 'ë‹‰ë„¤ì„',
        }
        widgets = {
            'email' : forms.EmailInput(
                attrs= {
                    'placeholder' : 'example@example.com',
                    'class' : 'form-control',
                }
            ),
            'nickname': forms.TextInput(
                attrs= {
                    'placeholder':'ë‹‰ë„¤ì„',
                    'class': 'form-control',
                }
            )
        }


# settings.py
# í…œí”Œë¦¿ ê²½ë¡œ ì„¤ì •
TEMPLATES = [
    {
    'DIRS': [BASE_DIR / 'templates'],
    }
]


# member/views.py

from django.http import HttpResponseRedirect
from django.shortcuts import render
from django.urls import reverse_lazy
from django.views.generic import FormView

from member.forms import SignupForm


class SignupView(FormView):
    template_name = 'auth/signup.html'  # í…œí”Œë¦¿ ì„¤ì •
    form_class = SignupForm  # í¼ ì„¤ì •
    # success_url = reverse_lazy('signup_done')  # ì™„ë£Œì‹œ url
    # success_urlì€ í´ë˜ìŠ¤ê°€ ë¡œë”©ë  ë•Œ ì„¤ì •ë©ë‹ˆë‹¤.
    # ë§Œì•½ reverse()ë¥¼ ì“´ë‹¤ë©´, í´ë˜ìŠ¤ê°€ ë¡œë”©ë  ì‹œì ì— URLConfê°€ ì™„ì „íˆ ë¡œë”©ë˜ì§€ ì•Šì•˜ì„ ìˆ˜ë„ ìˆì–´
    # ImportError ë˜ëŠ” ImproperlyConfigured ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    # reverse_lazy() â†’ ë‚˜ì¤‘ì— ì‹¤ì œë¡œ URLì´ í•„ìš”í•  ë•Œ ê³„ì‚° (ì§€ì—° í‰ê°€)

    def form_valid(self,form):
        # form.save()
        # return HttpResponseRedirect(self.get_success_url())

        user = form.save()
        return render(
            self.request,
            template_name= 'auth/signup_done.html',
            context={'user':user}
        )


# templates/base.html

{%  load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pystagram</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
</head>
<body>
<div class="container">
    {% block content %}{% endblock %}
</div>

    <script src="{% static 'js/bootstrap.bundle.js' %}"></script>
</body>
</html>

# templates/signup.html
{%  extends 'base.html' %}
{% block content %}
    <div>
        <h1 class="title">íšŒì›ê°€ì…</h1>
        <form method="POST">
            {% csrf_token %}
            {% for field in form %}
                <div class="form-group row mb-2">
                    <labe class="form-label col-md-2" for="{{ field.auto_id }}">{{ field.label }}</labe>
                    <div class="col-md-10">
                        {{ field }}
                    </div>
                    {% for error in field.errors %}
                        <span class="text-danger">{{ error }}</span>
                    {% endfor %}
                </div>
            {%  endfor %}
            {% for error in form.non_field_error %}
                <p class="text-danger">{{ error }}</p>
            {% endfor %}
            <button class="btn btn-success opacity-50">íšŒì›ê°€ì…</button>
        </form>
    </div>
{% endblock %}


# config/urls.py

from django.contrib import admin
from django.urls import path
from django.views.generic import TemplateView

from member import views as member_views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('signup/', member_views.SignupView.as_view(), name='signup'),
    # path('signup/done/', TemplateView.as_view(template_name='auth/signup_done.html'), name='signup_done'),
]


# signup_done.html

{% extends 'base.html' %}
{% block content %}
    <div class="col-8 offset-2">
        <h1>íšŒì›ê°€ì…ì´ ê±°ì˜ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</h1>
        <p>
            ì´ë©”ì¼ ì¸ì¦ì„ í•˜ì—¬ íšŒì›ê°€ì…ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.
            <br>
            ({{ user.email }})
        </p>
    </div>
{% endblock %}



<aside>
ğŸ’¡ **í™˜ê²½ë³€ìˆ˜**ëŠ” ë¯¼ê°í•œ ì •ë³´ë¥¼ ì½”ë“œì—ì„œ ë¶„ë¦¬í•˜ì—¬ ë…¸ì¶œì„ ìµœì†Œí™”í•©ë‹ˆë‹¤. 
í™˜ê²½ì— ë”°ë¼ ì„¤ì •ì„ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆì–´ ì½”ë“œ ìˆ˜ì • ì—†ì´ ë‹¤ì–‘í•œ í™˜ê²½ì— ëŒ€ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
ê°œë°œ íŒ€ ë‚´ì—ì„œ ë™ì¼í•œ ì½”ë“œë¥¼ ì‚¬ìš©í•˜ë˜, ê°ì í™˜ê²½ì— ë§ëŠ” ì„¤ì •ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ í˜‘ì—…ì´ ì›í™œí•´ì§‘ë‹ˆë‹¤.

</aside>

GitHubì— ì˜¬ë¦´ ë•ŒëŠ” `.gitignore` íŒŒì¼ì„ ì´ìš©í•˜ì—¬ í‘¸ì‹œí•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### python-dotenv

ë³´í¸ì ìœ¼ë¡œ í™˜ê²½ë³€ìˆ˜ëŠ” `python-dotenv` ë¥¼ ì´ìš©í•´ ê´€ë¦¬í•©ë‹ˆë‹¤.

`python-dotenv`ëŠ” íŒŒì´ì¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‰½ê²Œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.Â `.env`Â íŒŒì¼ì— ì €ì¥ëœ í™˜ê²½ ë³€ìˆ˜ë¥¼ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì™€ì„œ íŒŒì´ì¬ ì½”ë“œ ë‚´ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

[python-dotenv](https://pypi.org/project/python-dotenv/)

### ì£¼ìš” ê¸°ëŠ¥

- **í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬**:Â `.env`Â íŒŒì¼ì— í™˜ê²½ ë³€ìˆ˜ë“¤ì„ ì •ì˜í•˜ê³ , ì´ë¥¼ ì½”ë“œì—ì„œ ì‰½ê²Œ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë³´ì•ˆì„±**: API í‚¤ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì†ŒìŠ¤ ì½”ë“œì— ì§ì ‘ ì‘ì„±í•˜ì§€ ì•Šê³ Â `.env`Â íŒŒì¼ë¡œ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ë³´ì•ˆì„ ê°•í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ìœ ì—°ì„±**: ì½”ë“œì˜ ì‹¤í–‰ í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¸ ì„¤ì •ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ ê°œë°œ, í…ŒìŠ¤íŠ¸, í”„ë¡œë•ì…˜ í™˜ê²½ ê°„ì˜ ì„¤ì • ì°¨ì´ë¥¼ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì‚¬ìš© ì˜ˆì‹œ

1. **ì„¤ì¹˜**:
    
    ```bash
    >> pip install python-dotenv
    ```
    
2. **.env íŒŒì¼ ìƒì„±**: í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—Â `.env`Â íŒŒì¼ì„ ìƒì„±í•˜ê³ , í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
    
    ```bash
    # .env íŒŒì¼ ì˜ˆì‹œ
    DATABASE_URL=postgres://user:password@localhost:5432/mydatabase
    SECRET_KEY=mysecretkey
    ```
    
3. **íŒŒì´ì¬ ì½”ë“œì—ì„œ ì‚¬ìš©**:
    
    ```python
    from dotenv import load_dotenv
    import os
    
    load_dotenv()  # .env íŒŒì¼ì˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤
    
    database_url = os.getenv('DATABASE_URL')
    secret_key = os.getenv('SECRET_KEY')
    
    print(f"Database URL: {database_url}")
    print(f"Secret Key: {secret_key}")
    
    ```
    
ì´ë ‡ê²ŒÂ `.env`Â íŒŒì¼ì— ì •ì˜ëœ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½”ë“œì—ì„œ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í”„ë¡œì íŠ¸ì˜ ì„¤ì •ì„ ê´€ë¦¬í•˜ê³  ë¯¼ê°í•œ ì •ë³´ë¥¼ ë³´í˜¸í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.


# config_secret

.config_secret ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•´ì„œ í™˜ê²½ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•˜ë©´ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ê³  ì½”ë“œì™€ í™˜ê²½ ì„¤ì •ì„ ë¶„ë¦¬í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ í™˜ê²½ë³„ë¡œ ë‹¤ë¥¸ ì„¤ì •ì„ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
secret.json íŒŒì¼ì„ í†µí•´ json í˜•íƒœë¡œ ì •ë³´ë¥¼ ê´€ë¦¬í•  ê²½ìš°, ì—¬ëŸ¬ ê°œì˜ DBë¥¼ í•œ ê³³ì— ë¬¶ê±°ë‚˜ì˜ ë°©ì‹ì„ í†µí•´ ê´€ë¦¬ê°€ ìš©ì´í•©ë‹ˆë‹¤. ì´ ë•ŒëŠ” íŒŒì¼ì„ ì½ì–´ì™€ì„œ json.loads ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ json stringì„ dictionary í˜•íƒœë¡œ ë°”ê¿” ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì‚¬ìš© ì˜ˆì‹œ
import os
import json

# í˜„ì¬ í™˜ê²½ì„ ì§€ì • (ë³´í†µ í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •í•˜ê±°ë‚˜ ê¸°ë³¸ ê°’ì„ ì‚¬ìš©)
current_env = os.getenv('ENV', 'development')

# í•´ë‹¹ í™˜ê²½ì˜ secret.json íŒŒì¼ ê²½ë¡œ ì„¤ì •
secret_file = os.path.join('config_secret', f'{current_env}.json')

# secret.json íŒŒì¼ ë¡œë“œ
with open(secret_file) as f:
    secrets = json.load(f)

# JSON ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
DEBUG = secrets['DEBUG']
DATABASE_URL = secrets['DATABASE_URL']
SECRET_KEY = secrets['SECRET_KEY']

print(f"DEBUG: {DEBUG}")
print(f"DATABASE_URL: {DATABASE_URL}")
print(f"SECRET_KEY: {SECRET_KEY}")


ì´ë©”ì¼ ì¸ì¦ ê¸°ëŠ¥
ë„¤ì´ë²„ ì´ë©”ì¼ í™˜ê²½ì„¤ì •
POP3/SMTP, IMAP/SMTP Â í™œì„±í™”

secret.json
"email": {
    "user": "xowls0131@naver.com",
    "password": "20s820asxS!"
  },

settings.py
# Email
# from django.core.mail.backends.smtp import EmailBackend
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.naver.com'
EMAIL_USE_TLS = True  # ë³´ì•ˆì—°nê²°
EMAIL_PORT = 587  # ë„¤ì´ë²„ ë©”ì¼ í™˜ê²½ì„¤ì •ì—ì„œ í™•ì¸ ê°€ëŠ¥
EMAIL_HOST_USER = SECRET["email"]["user"]
EMAIL_HOST_PASSWORD =  SECRET["email"]["password"]

ë„¤ì´ë²„
2ë‹¨ê³„ ì¸ì¦ í•´ì œ

python3 manage.py shell_plus

In [1]: from django.core.mail import send_mail

In [2]: title = 'ì œëª©ì…ë‹ˆë‹¤.'

In [3]: message = 'ì´ê²ƒì€ djangoì—ì„œ ë³´ë‚¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤.'

In [4]: from_email = settings.EMAIL_HOST_USER

In [5]: to_email = ['xowls0131@naver.com']

In [6]: send_mail(title, message, from_email, to_email)


---------------------
# swiper (ìŠ¬ë¼ì´ë“œ)
---------------------

https://swiperjs.com/get-started#use-swiper-from-cdn

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>

<!-- Slider main container -->
<div class="swiper">
  <!-- Additional required wrapper -->
  <div class="swiper-wrapper">
    <!-- Slides -->
    <div class="swiper-slide">Slide 1</div>
    <div class="swiper-slide">Slide 2</div>
    <div class="swiper-slide">Slide 3</div>
    ...
  </div>
  <!-- If we need pagination -->
  <div class="swiper-pagination"></div>

  <!-- If we need navigation buttons -->
  <div class="swiper-button-prev"></div>
  <div class="swiper-button-next"></div>

  <!-- If we need scrollbar -->
  <div class="swiper-scrollbar"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>


---------------------
# font-awesome (ì•„ì´ì½˜)
---------------------

https://fontawesome.com/

start for free

download
https://fontawesome.com/download

free for web

Docs

Getting Started

webfonts


----------------
ë¬´í•œ ìŠ¤í¬ë¡¤
----------------


https://github.com/imakewebthings/waypoints

In [1]: post_list = Post.objects.all()

In [2]: for _ in range(20):
   ...:     for post in post_list:
   ...:         images = PostImage.objects.filter(post=post)
   ...:         post.id = None
   ...:         post.save()
   ...:         for image in images:
   ...:             image.id = None
   ...:             image.post = post
   ...:             image.save()



í¼ì…‹
https://cdnjs.com/libraries/jquery.formset


# ë§ˆì´ê·¸ë ˆì´ì…˜ ëª©ë¡ í‘œì‹œ
python3 manage.py showmigrations

# í•´ë‹¹ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ëŒì•„ê°
python3 manage.py migrate post 0001


------------
ì¢‹ì•„ìš”
------------

------------
íŒ”ë¡œìš°
------------

In [1]: u = User.objects.get(email='admin@admin.com')

In [2]: u2 = User.objects.first()

In [3]: u
Out[3]: <User: real-admin>

In [4]: u2
Out[4]: <User: 111>

In [5]: UserFollowing.objects.create(to_user=u, from_user=u2)
Out[5]: <UserFollowing: UserFollowing object (1)>

In [6]: u.followers.count()
Out[6]: 1

In [7]: u2.following.count()
Out[7]: 1

In [9]: u2.followers.count()
Out[9]: 0

ë„¤ì´ë²„ ë¡œê·¸ì¸

ë„¤ì´ë²„ ê°œë°œì ì„¼í„° ê²€ìƒ‰
https://developers.naver.com/main/

ë„¤ì´ë²„ ë¡œê·¸ì¸ í´ë¦­

ì˜¤í”ˆ api ì´ìš© ì‹ ì²­ í´ë¦­

ì•½ê´€ë™ì˜, ê²Œì • ì •ë³´ ë“±ë¡ í›„ ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡

ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡ ë©”ë‰´ì—ì„œ 
ë„¤ì´ë²„ ë¡œê·¸ì¸ ì„ íƒ
ì´ë©”ì¼ ì£¼ì†Œ ì²´í¬

ë¡œê·¸ì¸ ì˜¤í”ˆ API
ì„œë¹„ìŠ¤ í™˜ê²½

PCì›¹
ì„œë¹„ìŠ¤ URL
http://localhost:8000

ë„¤ì´ë²„ ë¡œê·¸ì¸
Callback URL (ìµœëŒ€ 5ê°œ)
http://localhost:8000/oauth/naver/callback

ë“±ë¡í•˜ê¸°

ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ë³´
Client ID, Client Secretë¥¼ í”„ë¡œì íŠ¸ settings.pyì— ë“±ë¡

ë¦¬í€˜ìŠ¤íŠ¸ í˜í‚¤ì§€ ì„¤ì¹˜
poetry add requests

oatuh_views.py
NAVER_CALLBACK_URL = '/naver/callback/'

documents -> apiëª…ì„¸

https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=í´ë¼ì´ì–¸íŠ¸_ì•„ì´ë””&redirect_uri=http://localhost:8000/naver/callback/&state=abc


https://nid.naver.com/oauth2.0/token

í™•ì¸
python3 manage.py shell_plus
user = User.objects.last()
user
user.nickname
user.password


----------------
ê¹ƒí—ˆë¸Œ ë¡œê·¸ì¸
----------------

ê¹ƒí—ˆë¸Œì—ì„œ í™ˆí˜ì´ì§€ì—ì„œ
Settings/Developer settings/Oauth Apps
New Oauth App í´ë¦­

Homepage URL ì„¤ì •
http://localhost:8000

Authorization callback URL ì„¤ì •
http://localhost:8000/oauth/github/callback/

github oauth documents
https://docs.github.com/ko/apps/oauth-apps/building-oauth-apps/authorizing-oauth-apps

ìš”ì²­ì„ ë³´ë‚´ë©´ ì´ëŸ°ì‹ìœ¼ë¡œ ë°ì´í„°ê°€ ë“¤ì–´ì™€ì„œ íŒŒì‹±ì„ í•´ì¤˜ì•¼í•¨.
access_token=gho_16C7e42F292c6912E7710c838347Ae178B4a&scope=repo%2Cgist&token_type=bearer

íŒŒì‹±
https://docs.python.org/ko/3.13/library/urllib.parse.html